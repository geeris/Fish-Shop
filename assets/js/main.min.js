function showProducts(e){let t=e,a="";for(let e of t)a+=`\n        <div class="borderProducts m-3 mb-5">\n            <img src="${e.slika.src}" class="text-center mb-3" alt="${e.slika.alt}" />\n        \n            <h3 class="highlight ml-2 mt-1 mb-2"> ${e.naziv} `,1==e.isNew&&(a+='<span class="badge"> New</span>'),a+=`\n            </h3>\n            <p class="mb-1">Code to order item:<span class="code"> ${e.code}</span></p>\n            <p class="mb-2">Weight: <span class="code">${e.width}g</span> </p>\n            <div class="d-flex justify-content-between align-content-center">\n                <span class="p-2 ml-2 cena">`,0==e.newPrice?a+=`${e.price}€`:a+=`<span class="sale">${e.price}€</span>  <span class="saleRed">${e.newPrice}€</span>`,a+=`</span>\n                <a href="#" data-id="${e.id}" class="add text-center mr-2" > Add item </a>\n            </div>\n        </div>\n    `;document.getElementById("products").innerHTML=a}window.onload=function(){$("input").attr("autocomplete","off"),$.ajax({url:"assets/data/products.json",method:"get",dataType:"json",success:function(e){showProducts(e)},error:function(e,t,a){alert(a)}}),fillTypeOfFood(),fillManufacturer(),fillFooterSocials(),headerImages(),document.getElementById("search").addEventListener("keyup",sortAndFilter);let e=document.querySelectorAll(".filters");for(let t of e)t.addEventListener("click",sortAndFilter);document.getElementById("selectPrice").addEventListener("change",sortAndFilter),$("#search").keyup(function(){localStorage.setItem("search",$("#search").val())}),$(".food").click(function(){localStorage.setItem("food",$(this).attr("data-food-type"))}),$(".brand").click(function(){localStorage.setItem("brand",$(this).attr("data-brand"))}),$(".reset").click(function(e){e.preventDefault(),localStorage.removeItem("food"),localStorage.removeItem("brand"),localStorage.removeItem("search"),localStorage.removeItem("sort"),document.getElementsByClassName("search")[0].value="",$(".food").find("i").addClass("disappear"),$(".brand").find("i").addClass("disappear"),$("#selectPrice").val("0"),sortAndFilter()}),onbeforeunload=localStorage.removeItem("food"),localStorage.removeItem("brand"),localStorage.removeItem("search"),localStorage.removeItem("sort"),localStorage.removeItem("addedProducts"),$("#selectPrice").change(function(){localStorage.setItem("sort",$(this).val())}),document.getElementById("check").addEventListener("click",checkData),$("#author").click(function(e){e.preventDefault(),Swal.fire({title:"Gabrijela Matović 21/18",text:"geeris77@gmail.com",imageUrl:"assets/images/author.jpg",imageWidth:350,imageHeight:470,imageAlt:"Author"})}),$(".food").click(function(e){e.preventDefault(),$(".food").find("i").addClass("disappear"),$(this).find("i").removeClass("disappear")}),$(".brand").click(function(e){e.preventDefault(),$(".brand").find("i").addClass("disappear"),$(this).find("i").removeClass("disappear")}),null===localStorage.getItem("addedProducts")&&(document.getElementById("addedProducts").innerHTML='<p class="notFound"> No added products. </p>');var t=[];$("body").on("click","a.add",function(e){let a=this;e.preventDefault(),localStorage.removeItem("addedProducts"),console.log(localStorage.getItem("addedProducts"));let o=$(this).data("id");t.includes(o)||(t.push(o),$(a).html("Added")),localStorage.setItem("addedProducts",JSON.stringify(t)),addProducts(t)})};var filterObject=function(e,t){this.id=e,this.naziv=t},typeOfFood=[new filterObject(1,"Flakes"),new filterObject(2,"Frozen food"),new filterObject(3,"Pellets")],brand=[new filterObject(1,"Ocean Nutrition"),new filterObject(2,"Tropical")],footerSocial=[{id:1,href:"https://www.facebook.com/",content:'<i class="fab fa-facebook networksI ml-5"></i>'},{id:2,href:"https://www.instagram.com/",content:'<i class="fab fa-instagram networksI"></i>'},{id:3,href:"https://twitter.com/",content:'<i class="fab fa-twitter - square networksI mr-5"></i>'}];function fillTypeOfFood(){let e="";for(let t of typeOfFood)e+=`\n            <a href="#" class="filters food" data-food-type="${t.naziv}"> ${t.naziv} <i class="fas fa-check-circle disappear"></i></a>\n                   `;document.getElementById("typeOfFood").innerHTML+=e}function fillManufacturer(){let e="";for(let t of brand)e+=`\n            <a href="#" class="filters brand" data-brand="${t.naziv}"> ${t.naziv} <i class="fas fa-check-circle disappear"></i></a>\n                   `;document.getElementById("brand").innerHTML+=e}function fillFooterSocials(){let e="";for(let t of footerSocial)e+=`\n            <li> <a href="${t.href}" target="_blank"> ${t.content}  </a></li>\n                   `;document.getElementById("socials").innerHTML+=e}var correct,images=[{src:"sale1.jpg",alt:"Sale"},{src:"sale2.jpg",alt:"New collection"}];function headerImages(){let e=1;setInterval(function(){document.getElementById("headerImages").innerHTML=`<img src="assets/images/${images[e].src}" class="saleSlika" alt="${images[e].alt}" />`,e==images.length-1?e=0:e++},3e3)}function sortAndFilter(){var e=[];$.ajax({url:"assets/data/products.json",method:"get",dataType:"json",success:function(t){0!=(e=sortProducts(e=filterProductsBrand(e=filterProductsFood(e=search(e=t))))).length?showProducts(e):document.getElementById("products").innerHTML='<div class="notFound"> <p> No products were found matching your selection. </p> </div>'},error:function(e,t,a){alert(a)}})}function search(e){let t=e,a=e,o=localStorage.getItem("search");return null===localStorage.getItem("search")?a:a=t.filter(e=>e.naziv.toLowerCase().includes(o.toLowerCase()))}function sortProducts(e){let t=e,a=document.getElementById("selectPrice").value;return 1==a?(t.sort((e,t)=>(0==e.newPrice?e.price:e.newPrice)>(0==t.newPrice?t.price:t.newPrice)?1:(0==e.newPrice?e.price:e.newPrice)<(0==t.newPrice?t.price:t.newPrice)?-1:0),t):2==a?(t.sort((e,t)=>(0==e.newPrice?e.price:e.newPrice)>(0==t.newPrice?t.price:t.newPrice)?-1:(0==e.newPrice?e.price:e.newPrice)<(0==t.newPrice?t.price:t.newPrice)?1:0),t):0==a?t:void 0}function filterProductsFood(e){let t=e,a=localStorage.getItem("food"),o=e;return null===localStorage.getItem("food")?o:o=t.filter(e=>e.type.naziv==a)}function filterProductsBrand(e){let t=e,a=localStorage.getItem("brand"),o=e;return null===localStorage.getItem("brand")?o:o=t.filter(e=>e.brand.naziv==a)}function checkData(e){e.preventDefault(),correct=!0,checkFullName(),checkPhoneNumber(),checkStreetName(),checkHouseNumber(),checkFlatNumber(),checkState(),checkCity(),checkZipCode(),console.log(correct),correct&&Swal.fire({title:"Are you sure you want to sent this message?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonColor:"#3085d6",confirmButtonText:"Yes"}).then(e=>{if(e.value){Swal.fire({title:"Your message has been sent!",icon:"success"});let e=document.getElementsByTagName("input");for(let t of e)t.value="";document.getElementById("addedProducts").innerHTML='<p class="notFound"> No added products. </p>'}})}function checkFullName(){let e=document.getElementById("fullName").value;console.log(correct),checkMyTextBox(e,/^([A-Z][a-z]{2,}\s)+([A-Z][a-z]{1,})$/,"fullName")}function checkPhoneNumber(){checkMyTextBox(document.getElementById("phone").value,/^\+[1-9][0-9]{10,13}$/,"phone")}function checkStreetName(){checkMyTextBox(document.getElementById("streetName").value,/^([1-9]\s)?([A-Z][a-z]{1,}\s)?([A-Z][a-z]{1,})$/,"streetName")}function checkHouseNumber(){checkMyTextBox(document.getElementById("house").value,/^([1-9])([0-9])?([0-9])?([0-9])?([0-9])?$/,"house")}function checkFlatNumber(){checkMyTextBox(document.getElementById("flat").value,/^([1-9])([0-9])?([0-9])?$/,"flat")}function checkState(){checkMyTextBox(document.getElementById("state").value,/^([A-Z][a-z]{3,}\s)?([A-Z][a-z]{2,})$/,"state")}function checkCity(){checkMyTextBox(document.getElementById("city").value,/^([A-Z][a-z]{2,}\s)*([A-Z][a-z]{2,})$/,"city")}function checkZipCode(){checkMyTextBox(document.getElementById("zipCode").value,/^[0-9]{4,5}$/,"zipCode")}function checkMyTextBox(e,t,a){t.test(e)?document.getElementById(`${a}`).classList.remove("redBorder"):(document.getElementById(`${a}`).classList.add("redBorder"),correct=!1)}function openNav(){document.getElementById("mySidenav").style.width="280px",document.getElementById("bodyOverlay").classList.add("sidenav-overlay"),document.getElementsByTagName("body")[0].classList.add("sidebar")}function closeNav(){document.getElementById("mySidenav").style.width="0",document.getElementById("bodyOverlay").classList.remove("sidenav-overlay"),document.getElementsByTagName("body")[0].classList.remove("sidebar")}function addProducts(e){$.ajax({url:"assets/data/products.json",method:"get",dataType:"json",success:function(t){let a=[],o=e;for(let e of t){let t=0;for(;t<o.length;)e.id==o[t]&&a.push(e),t++}console.log(a);let n="";for(let e of a)n+=`\n                    <div class="shop">\n                        <h3 class="highlight p-2 mb-0"> ${e.naziv} </h3>\n                            <div class="row d-flex justify-content-around align-items-center">\n                                <p class="m-0 ml-3 quantity"> Quantity : </p>\n                                <input type="number" class="form-control number" min="0" value="1" />\n                                <p class="m-0 mr-3"> x ${0==e.newPrice?e.price:e.newPrice}€ </p>\n                            </div>\n                    </div>\n                `;document.getElementById("addedProducts").innerHTML=n},error:function(e,t,a){alert(a)}})}document.getElementById("headerImages").innerHTML='<img src="assets/images/sale1.jpg" class="saleSlika" alt="Sale" />',$(function(){$(".example-popover").popover({container:"body"})});